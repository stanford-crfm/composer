algorithms: []
command: 'git clone {{ git_repo }} $HOME/composer

  cd $HOME/composer

  echo ''Checking out composer branch {{ git_branch }}''

  git checkout {{ git_branch }}

  pip3 install braceexpand zstandard torch==1.11 torchvision torchaudio --extra-index-url
  https://download.pytorch.org/whl/cu113

  pip install --user -e .[all]

  composer -n 8 examples/run_composer_trainer.py -f /mnt/config/parameters.yaml --run_name
  {{ name }}

  '
git_branch: multinode_gpt2
git_repo: https://github.com/stanford-crfm/composer
image: mosaicml/pytorch
instance: r6z1-g8-a100
models: mistral_weighted_gpt2_11m
name: miniallpubmed-pubmedabs21-pubmedc19-medical11-nih0
parameters:
  callbacks:
  - lr_monitor: {}
  - loss_scale_monitor: {}
  - grad_monitor:
      log_layer_grad_norms: true
  - lr_monitor: {}
  - speed_monitor:
      window_size: 10
  loggers:
  - wandb:
      entity: stanford-mercury
      log_artifacts: true
      project: mosaic-gpt2
  save_artifact_name: '{run_name}/checkpoints/rank{rank}'
  save_folder: /tmp/{run_name}
  save_interval: 20000ba
  save_num_checkpoints_to_keep: 1
  seed: 1
  train_dataset:
    sprucfluo:
      weights:
        academic: 0.0
        books: 0.0
        enron: 0.0
        europarl: 0.0
        gutenberg: 0.0
        hackernews: 0.0
        law: 0.0
        medical: 0.10562157128570372
        nih: 0.0650238752321453
        pubmedAbs: 0.21206654669786382
        pubmedC: 0.19035127110424283
        stack_exchange: 0.0
        subtitles: 0.10169441259022208
        ubuntu_irc: 0.0
        uspto: 0.0
        webtext: 0.1968417323439336
        wikipedia: 0.12840059074588872
project: mosaic-gpt2
